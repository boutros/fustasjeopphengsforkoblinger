import '../tags/search-external.tag.html'
import '../tags/book-main-entry.tag.html'
import '../tags/input-literal.tag.html'

<app-book>
	<div class="container">
		<div class="row">
			<div class="col col-left">
				<h3>Søk i eksterne kilder</h3>
				<div class="panel">
					<search-external events={ eventsExternalSearch }></search-external>
				</div>
			</div>
			<div class="col col-mid">
				<div class="result-panel" if={ searchResults.external }>
					&nbsp;
					<search-external-results events={ eventsExternalSearch }></search-external-results>
				</div>
			</div>
			<div class="col col-right">
				<!-- marc-preview events={ eventsExternalSearch } ></marc-preview> -->
			</div>
		</div>
		<div class="row">
			<div class="col col-left">
				<h3>Hovedinnførsel / verkstilknytning</h3>
				<div class="panel">
					<book-main-entry></book-main-entry>
				</div>
			</div>
			<div class="col col-mid"></div>
			<div class="col col-right"></div>
		</div>
		<div class="col">
			<h3>Tittelopplysninger</h3>
			<div class="panel">
				<p>
					<strong>Hovedtittel</strong>
					<input-literal predicate="mainTitle"></input-literal>
				</p>
				<p>
					<strong>Undertittel</strong>
					<input-literal predicate="subtitle"></input-literal>
				</p>
				<p>
					<strong>Deltittel</strong>
					<input-literal predicate="partTitle"></input-literal>
				</p>
				<p>
					<strong>Delnummer</strong>
					<input-literal predicate="partNumber"></input-literal>
				</p>
			</div>
		</div>

	</div>

	<script>
		const tag = this

		tag.searchResults = {
			external: false
		}
		tag.eventsExternalSearch = riot.observable()

		tag.eventsExternalSearch.on('is-searching', function() {
			tag.searchResults.external = true
			tag.update()
		})

	</script>
</app-book>